<div class="container">
  <div class="form-container">
    <!-- Encabezado -->
    <div class="header">
      <h1 class="title">Crear Nueva Cuenta</h1>
      <p class="subtitle">Completa todos los campos para registrar un nuevo usuario</p>
    </div>

    <!-- Mensaje de éxito -->
    <div *ngIf="submitSuccess" class="alert alert-success">
      <div class="alert-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20,6 9,17 4,12"></polyline>
        </svg>
      </div>
      <div class="alert-content">
        <h4>¡Usuario creado exitosamente!</h4>
        <p>El usuario ha sido registrado correctamente. Serás redirigido al login en unos segundos.</p>
      </div>
    </div>

    <!-- Mensaje de error -->
    <div *ngIf="submitError" class="alert alert-error">
      <div class="alert-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="15" y1="9" x2="9" y2="15"></line>
          <line x1="9" y1="9" x2="15" y2="15"></line>
        </svg>
      </div>
      <div class="alert-content">
        <h4>Error al crear usuario</h4>
        <p>{{ submitError }}</p>
      </div>
    </div>

    <!-- Formulario -->
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">
      
      <!-- Información Personal -->
      <div class="form-section">
        <h3 class="section-title">Información Personal</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="nombres">Nombres *</label>
            <input 
              type="text" 
              id="nombres" 
              formControlName="nombres"
              [class.error]="formErrors.nombres"
              placeholder="Ingresa los nombres">
            <div *ngIf="formErrors.nombres" class="error-message">
              {{ formErrors.nombres }}
            </div>
          </div>

          <div class="form-group">
            <label for="apellidos">Apellidos *</label>
            <input 
              type="text" 
              id="apellidos" 
              formControlName="apellidos"
              [class.error]="formErrors.apellidos"
              placeholder="Ingresa los apellidos">
            <div *ngIf="formErrors.apellidos" class="error-message">
              {{ formErrors.apellidos }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="cui">CUI (DPI) *</label>
            <input 
              type="text" 
              id="cui" 
              formControlName="cui"
              (input)="onCuiInput($event)"
              [class.error]="formErrors.cui"
              placeholder="1234-56789-1234"
              maxlength="15">
            <div *ngIf="formErrors.cui" class="error-message">
              {{ formErrors.cui }}
            </div>
          </div>

          <div class="form-group">
            <label for="fecha_nacimiento">Fecha de Nacimiento *</label>
            <input 
              type="date" 
              id="fecha_nacimiento" 
              formControlName="fecha_nacimiento"
              [class.error]="formErrors.fecha_nacimiento">
            <div *ngIf="formErrors.fecha_nacimiento" class="error-message">
              {{ formErrors.fecha_nacimiento }}
            </div>
          </div>
        </div>
      </div>

      <!-- Información de Contacto -->
      <div class="form-section">
        <h3 class="section-title">Información de Contacto</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="email">Correo Electrónico</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email"
              [class.error]="formErrors.email"
              placeholder="ejemplo@correo.com">
            <div *ngIf="formErrors.email" class="error-message">
              {{ formErrors.email }}
            </div>
          </div>

          <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input 
              type="tel" 
              id="telefono" 
              formControlName="telefono"
              [class.error]="formErrors.telefono"
              placeholder="12345678">
            <div *ngIf="formErrors.telefono" class="error-message">
              {{ formErrors.telefono }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label for="direccion">Dirección</label>
            <textarea 
              id="direccion" 
              formControlName="direccion"
              placeholder="Ingresa la dirección completa"
              rows="3"></textarea>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="ocupacion">Ocupación</label>
            <input 
              type="text" 
              id="ocupacion" 
              formControlName="ocupacion"
              placeholder="Profesión u ocupación">
          </div>
        </div>
      </div>

      <!-- Seguridad -->
      <div class="form-section">
        <h3 class="section-title">Información de Seguridad</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label for="password">Contraseña *</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password"
              [class.error]="formErrors.password"
              placeholder="Mínimo 6 caracteres">
            <div *ngIf="formErrors.password" class="error-message">
              {{ formErrors.password }}
            </div>
          </div>

          <div class="form-group">
            <label for="confirmPassword">Confirmar Contraseña *</label>
            <input 
              type="password" 
              id="confirmPassword" 
              formControlName="confirmPassword"
              [class.error]="formErrors.confirmPassword"
              placeholder="Repite la contraseña">
            <div *ngIf="formErrors.confirmPassword" class="error-message">
              {{ formErrors.confirmPassword }}
            </div>
          </div>
        </div>
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary"
          (click)="resetForm()"
          [disabled]="isSubmitting">
          Limpiar
        </button>
        
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="userForm.invalid || isSubmitting">
          <span *ngIf="isSubmitting" class="loading-spinner"></span>
          {{ isSubmitting ? 'Creando...' : 'Crear Usuario' }}
        </button>
      </div>

      <!-- Información adicional -->
      <div class="form-footer">
        <p class="form-note">
          Los campos marcados con * son obligatorios.
        </p>
        <p class="form-note">
          ¿Ya tienes una cuenta? <a routerLink="/login" class="link">Iniciar sesión</a>
        </p>
      </div>
    </form>
  </div>
</div>
